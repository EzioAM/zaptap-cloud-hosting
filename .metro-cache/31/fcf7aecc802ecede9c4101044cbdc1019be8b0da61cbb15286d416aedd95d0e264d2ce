{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"../supabase/client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"q3G/dBcB/lyqe2ZqsudXc9dkd4E=","exportNames":["*"]}},{"name":"../../utils/EventLogger","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":109},"end":{"line":3,"column":54,"index":163}}],"key":"mEVtTU9mTkJ75ffab8N2nK/i6dk=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.VersionHistoryService = void 0;\n  var _slicedToArray2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/slicedToArray\"));\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/createClass\"));\n  var _client = require(_dependencyMap[5], \"../supabase/client\");\n  var _EventLogger = require(_dependencyMap[6], \"../../utils/EventLogger\");\n  var VersionHistoryService = exports.VersionHistoryService = /*#__PURE__*/function () {\n    function VersionHistoryService() {\n      (0, _classCallCheck2.default)(this, VersionHistoryService);\n    }\n    return (0, _createClass2.default)(VersionHistoryService, null, [{\n      key: \"getVersions\",\n      value: (\n      /**\n       * Get all versions for an automation\n       */\n      function () {\n        var _getVersions = (0, _asyncToGenerator2.default)(function* (automationId) {\n          try {\n            var _yield$supabase$from$ = yield _client.supabase.from('automation_versions').select(`\n          *,\n          profiles:created_by(display_name, email)\n        `).eq('automation_id', automationId).order('version_number', {\n                ascending: false\n              }),\n              data = _yield$supabase$from$.data,\n              error = _yield$supabase$from$.error;\n            if (error) throw error;\n            return data || [];\n          } catch (error) {\n            _EventLogger.EventLogger.error('VersionHistory', 'Failed to get version history:', error);\n            return [];\n          }\n        });\n        function getVersions(_x) {\n          return _getVersions.apply(this, arguments);\n        }\n        return getVersions;\n      }()\n      /**\n       * Create a new version manually\n       */\n      )\n    }, {\n      key: \"createVersion\",\n      value: (function () {\n        var _createVersion = (0, _asyncToGenerator2.default)(function* (automationId, changesSummary, automation) {\n          try {\n            var _yield$supabase$auth$ = yield _client.supabase.auth.getUser(),\n              user = _yield$supabase$auth$.data.user;\n            if (!user) throw new Error('User not authenticated');\n\n            // Get the next version number\n            var _yield$supabase$from$2 = yield _client.supabase.from('automation_versions').select('version_number').eq('automation_id', automationId).order('version_number', {\n                ascending: false\n              }).limit(1).single(),\n              maxVersion = _yield$supabase$from$2.data;\n            var nextVersion = ((maxVersion == null ? void 0 : maxVersion.version_number) || 0) + 1;\n            var versionData = {\n              automation_id: automationId,\n              version_number: nextVersion,\n              title: automation.title,\n              description: automation.description,\n              steps: automation.steps,\n              category: automation.category,\n              tags: automation.tags,\n              changes_summary: changesSummary,\n              created_by: user.id\n            };\n            var _yield$supabase$from$3 = yield _client.supabase.from('automation_versions').insert(versionData).select().single(),\n              data = _yield$supabase$from$3.data,\n              error = _yield$supabase$from$3.error;\n            if (error) throw error;\n            return data;\n          } catch (error) {\n            _EventLogger.EventLogger.error('VersionHistory', 'Failed to create version:', error);\n            return null;\n          }\n        });\n        function createVersion(_x2, _x3, _x4) {\n          return _createVersion.apply(this, arguments);\n        }\n        return createVersion;\n      }()\n      /**\n       * Restore an automation to a specific version\n       */\n      )\n    }, {\n      key: \"restoreVersion\",\n      value: (function () {\n        var _restoreVersion = (0, _asyncToGenerator2.default)(function* (automationId, versionId) {\n          try {\n            // Get the version data\n            var _yield$supabase$from$4 = yield _client.supabase.from('automation_versions').select('*').eq('id', versionId).eq('automation_id', automationId).single(),\n              version = _yield$supabase$from$4.data,\n              versionError = _yield$supabase$from$4.error;\n            if (versionError || !version) {\n              throw new Error('Version not found');\n            }\n\n            // Update the main automation\n            var _yield$supabase$from$5 = yield _client.supabase.from('automations').update({\n                title: version.title,\n                description: version.description,\n                steps: version.steps,\n                category: version.category,\n                tags: version.tags,\n                updated_at: new Date().toISOString()\n              }).eq('id', automationId),\n              updateError = _yield$supabase$from$5.error;\n            if (updateError) throw updateError;\n\n            // Create a new version entry for the restoration\n            yield this.createVersion(automationId, `Restored to version ${version.version_number}`, {\n              id: automationId,\n              title: version.title,\n              description: version.description || '',\n              steps: version.steps,\n              category: version.category || 'General',\n              tags: version.tags\n            });\n            return true;\n          } catch (error) {\n            _EventLogger.EventLogger.error('VersionHistory', 'Failed to restore version:', error);\n            return false;\n          }\n        });\n        function restoreVersion(_x5, _x6) {\n          return _restoreVersion.apply(this, arguments);\n        }\n        return restoreVersion;\n      }()\n      /**\n       * Compare two versions\n       */\n      )\n    }, {\n      key: \"compareVersions\",\n      value: function compareVersions(oldVersion, newVersion) {\n        var changes = [];\n\n        // Compare title\n        if (oldVersion.title !== newVersion.title) {\n          changes.push({\n            field: 'title',\n            oldValue: oldVersion.title,\n            newValue: newVersion.title,\n            changeType: 'modified'\n          });\n        }\n\n        // Compare description\n        if (oldVersion.description !== newVersion.description) {\n          changes.push({\n            field: 'description',\n            oldValue: oldVersion.description,\n            newValue: newVersion.description,\n            changeType: 'modified'\n          });\n        }\n\n        // Compare steps (simplified comparison)\n        if (JSON.stringify(oldVersion.steps) !== JSON.stringify(newVersion.steps)) {\n          var oldStepCount = oldVersion.steps.length;\n          var newStepCount = newVersion.steps.length;\n          if (oldStepCount !== newStepCount) {\n            changes.push({\n              field: 'steps',\n              oldValue: `${oldStepCount} steps`,\n              newValue: `${newStepCount} steps`,\n              changeType: oldStepCount < newStepCount ? 'added' : 'removed'\n            });\n          } else {\n            changes.push({\n              field: 'steps',\n              oldValue: 'Steps modified',\n              newValue: 'Step configuration changed',\n              changeType: 'modified'\n            });\n          }\n        }\n\n        // Compare category\n        if (oldVersion.category !== newVersion.category) {\n          changes.push({\n            field: 'category',\n            oldValue: oldVersion.category,\n            newValue: newVersion.category,\n            changeType: 'modified'\n          });\n        }\n\n        // Compare tags\n        var oldTags = (oldVersion.tags || []).sort();\n        var newTags = (newVersion.tags || []).sort();\n        if (JSON.stringify(oldTags) !== JSON.stringify(newTags)) {\n          changes.push({\n            field: 'tags',\n            oldValue: oldTags,\n            newValue: newTags,\n            changeType: 'modified'\n          });\n        }\n        return changes;\n      }\n\n      /**\n       * Get version statistics\n       */\n    }, {\n      key: \"getVersionStats\",\n      value: (function () {\n        var _getVersionStats = (0, _asyncToGenerator2.default)(function* (automationId) {\n          try {\n            var _versions$;\n            var versions = yield this.getVersions(automationId);\n            if (versions.length === 0) {\n              return {\n                totalVersions: 0,\n                lastModified: null,\n                mostActiveDay: null,\n                averageChangesPerVersion: 0\n              };\n            }\n\n            // Group by day to find most active day\n            var dayGroups = {};\n            versions.forEach(function (version) {\n              var day = new Date(version.created_at).toISOString().split('T')[0];\n              dayGroups[day] = (dayGroups[day] || 0) + 1;\n            });\n            var mostActiveDay = Object.entries(dayGroups).reduce(function (max, _ref) {\n              var _ref2 = (0, _slicedToArray2.default)(_ref, 2),\n                day = _ref2[0],\n                count = _ref2[1];\n              return count > max.count ? {\n                day: day,\n                count: count\n              } : max;\n            }, {\n              day: '',\n              count: 0\n            }).day;\n            return {\n              totalVersions: versions.length,\n              lastModified: ((_versions$ = versions[0]) == null ? void 0 : _versions$.created_at) || null,\n              mostActiveDay: mostActiveDay || null,\n              averageChangesPerVersion: versions.length > 1 ? Math.round((versions.length - 1) / versions.length * 100) / 100 : 0\n            };\n          } catch (error) {\n            _EventLogger.EventLogger.error('VersionHistory', 'Failed to get version stats:', error);\n            return {\n              totalVersions: 0,\n              lastModified: null,\n              mostActiveDay: null,\n              averageChangesPerVersion: 0\n            };\n          }\n        });\n        function getVersionStats(_x7) {\n          return _getVersionStats.apply(this, arguments);\n        }\n        return getVersionStats;\n      }()\n      /**\n       * Delete a specific version\n       */\n      )\n    }, {\n      key: \"deleteVersion\",\n      value: (function () {\n        var _deleteVersion = (0, _asyncToGenerator2.default)(function* (versionId) {\n          try {\n            var _yield$supabase$from$6 = yield _client.supabase.from('automation_versions').delete().eq('id', versionId),\n              error = _yield$supabase$from$6.error;\n            if (error) throw error;\n            return true;\n          } catch (error) {\n            _EventLogger.EventLogger.error('VersionHistory', 'Failed to delete version:', error);\n            return false;\n          }\n        });\n        function deleteVersion(_x8) {\n          return _deleteVersion.apply(this, arguments);\n        }\n        return deleteVersion;\n      }())\n    }]);\n  }();\n});","lineCount":297,"map":[[11,2,1,0],[11,6,1,0,"_client"],[11,13,1,0],[11,16,1,0,"require"],[11,23,1,0],[11,24,1,0,"_dependencyMap"],[11,38,1,0],[12,2,3,0],[12,6,3,0,"_EventLogger"],[12,18,3,0],[12,21,3,0,"require"],[12,28,3,0],[12,29,3,0,"_dependencyMap"],[12,43,3,0],[13,2,3,54],[13,6,26,13,"VersionHistoryService"],[13,27,26,34],[13,30,26,34,"exports"],[13,37,26,34],[13,38,26,34,"VersionHistoryService"],[13,59,26,34],[14,4,26,34],[14,13,26,34,"VersionHistoryService"],[14,35,26,34],[15,6,26,34],[15,10,26,34,"_classCallCheck2"],[15,26,26,34],[15,27,26,34,"default"],[15,34,26,34],[15,42,26,34,"VersionHistoryService"],[15,63,26,34],[16,4,26,34],[17,4,26,34],[17,15,26,34,"_createClass2"],[17,28,26,34],[17,29,26,34,"default"],[17,36,26,34],[17,38,26,34,"VersionHistoryService"],[17,59,26,34],[18,6,26,34,"key"],[18,9,26,34],[19,6,26,34,"value"],[19,11,26,34],[20,6,27,2],[21,0,28,0],[22,0,29,0],[23,6,27,2],[24,8,27,2],[24,12,27,2,"_getVersions"],[24,24,27,2],[24,31,27,2,"_asyncToGenerator2"],[24,49,27,2],[24,50,27,2,"default"],[24,57,27,2],[24,59,30,2],[24,70,30,27,"automationId"],[24,82,30,47],[24,84,30,79],[25,10,31,4],[25,14,31,8],[26,12,32,6],[26,16,32,6,"_yield$supabase$from$"],[26,37,32,6],[26,46,32,36,"supabase"],[26,62,32,44],[26,63,33,9,"from"],[26,67,33,13],[26,68,33,14],[26,89,33,35],[26,90,33,36],[26,91,34,9,"select"],[26,97,34,15],[26,98,34,16],[27,0,35,0],[28,0,36,0],[29,0,37,0],[29,9,37,9],[29,10,37,10],[29,11,38,9,"eq"],[29,13,38,11],[29,14,38,12],[29,29,38,27],[29,31,38,29,"automationId"],[29,43,38,41],[29,44,38,42],[29,45,39,9,"order"],[29,50,39,14],[29,51,39,15],[29,67,39,31],[29,69,39,33],[30,16,39,35,"ascending"],[30,25,39,44],[30,27,39,46],[31,14,39,52],[31,15,39,53],[31,16,39,54],[32,14,32,14,"data"],[32,18,32,18],[32,21,32,18,"_yield$supabase$from$"],[32,42,32,18],[32,43,32,14,"data"],[32,47,32,18],[33,14,32,20,"error"],[33,19,32,25],[33,22,32,25,"_yield$supabase$from$"],[33,43,32,25],[33,44,32,20,"error"],[33,49,32,25],[34,12,41,6],[34,16,41,10,"error"],[34,21,41,15],[34,23,41,17],[34,29,41,23,"error"],[34,34,41,28],[35,12,42,6],[35,19,42,13,"data"],[35,23,42,17],[35,27,42,21],[35,29,42,23],[36,10,43,4],[36,11,43,5],[36,12,43,6],[36,19,43,13,"error"],[36,24,43,18],[36,26,43,20],[37,12,44,6,"EventLogger"],[37,36,44,17],[37,37,44,18,"error"],[37,42,44,23],[37,43,44,24],[37,59,44,40],[37,61,44,42],[37,93,44,74],[37,95,44,76,"error"],[37,100,44,90],[37,101,44,91],[38,12,45,6],[38,19,45,13],[38,21,45,15],[39,10,46,4],[40,8,47,2],[40,9,47,3],[41,8,47,3],[41,17,30,15,"getVersions"],[41,28,30,26,"getVersions"],[41,29,30,26,"_x"],[41,31,30,26],[42,10,30,26],[42,17,30,26,"_getVersions"],[42,29,30,26],[42,30,30,26,"apply"],[42,35,30,26],[42,42,30,26,"arguments"],[42,51,30,26],[43,8,30,26],[44,8,30,26],[44,15,30,15,"getVersions"],[44,26,30,26],[45,6,30,26],[46,6,49,2],[47,0,50,0],[48,0,51,0],[49,6,49,2],[50,4,49,2],[51,6,49,2,"key"],[51,9,49,2],[52,6,49,2,"value"],[52,11,49,2],[53,8,49,2],[53,12,49,2,"_createVersion"],[53,26,49,2],[53,33,49,2,"_asyncToGenerator2"],[53,51,49,2],[53,52,49,2,"default"],[53,59,49,2],[53,61,52,2],[53,72,53,4,"automationId"],[53,84,53,24],[53,86,54,4,"changesSummary"],[53,100,54,26],[53,102,55,4,"automation"],[53,112,55,30],[53,114,56,39],[54,10,57,4],[54,14,57,8],[55,12,58,6],[55,16,58,6,"_yield$supabase$auth$"],[55,37,58,6],[55,46,58,39,"supabase"],[55,62,58,47],[55,63,58,48,"auth"],[55,67,58,52],[55,68,58,53,"getUser"],[55,75,58,60],[55,76,58,61],[55,77,58,62],[56,14,58,22,"user"],[56,18,58,26],[56,21,58,26,"_yield$supabase$auth$"],[56,42,58,26],[56,43,58,14,"data"],[56,47,58,18],[56,48,58,22,"user"],[56,52,58,26],[57,12,59,6],[57,16,59,10],[57,17,59,11,"user"],[57,21,59,15],[57,23,59,17],[57,29,59,23],[57,33,59,27,"Error"],[57,38,59,32],[57,39,59,33],[57,63,59,57],[57,64,59,58],[59,12,61,6],[60,12,62,6],[60,16,62,6,"_yield$supabase$from$2"],[60,38,62,6],[60,47,62,41,"supabase"],[60,63,62,49],[60,64,63,9,"from"],[60,68,63,13],[60,69,63,14],[60,90,63,35],[60,91,63,36],[60,92,64,9,"select"],[60,98,64,15],[60,99,64,16],[60,115,64,32],[60,116,64,33],[60,117,65,9,"eq"],[60,119,65,11],[60,120,65,12],[60,135,65,27],[60,137,65,29,"automationId"],[60,149,65,41],[60,150,65,42],[60,151,66,9,"order"],[60,156,66,14],[60,157,66,15],[60,173,66,31],[60,175,66,33],[61,16,66,35,"ascending"],[61,25,66,44],[61,27,66,46],[62,14,66,52],[62,15,66,53],[62,16,66,54],[62,17,67,9,"limit"],[62,22,67,14],[62,23,67,15],[62,24,67,16],[62,25,67,17],[62,26,68,9,"single"],[62,32,68,15],[62,33,68,16],[62,34,68,17],[63,14,62,20,"maxVersion"],[63,24,62,30],[63,27,62,30,"_yield$supabase$from$2"],[63,49,62,30],[63,50,62,14,"data"],[63,54,62,18],[64,12,70,6],[64,16,70,12,"nextVersion"],[64,27,70,23],[64,30,70,26],[64,31,70,27],[64,32,70,27,"maxVersion"],[64,42,70,37],[64,62,70,27,"maxVersion"],[64,72,70,37],[64,73,70,39,"version_number"],[64,87,70,53],[64,92,70,57],[64,93,70,58],[64,97,70,62],[64,98,70,63],[65,12,72,6],[65,16,72,12,"versionData"],[65,27,72,23],[65,30,72,26],[66,14,73,8,"automation_id"],[66,27,73,21],[66,29,73,23,"automationId"],[66,41,73,35],[67,14,74,8,"version_number"],[67,28,74,22],[67,30,74,24,"nextVersion"],[67,41,74,35],[68,14,75,8,"title"],[68,19,75,13],[68,21,75,15,"automation"],[68,31,75,25],[68,32,75,26,"title"],[68,37,75,31],[69,14,76,8,"description"],[69,25,76,19],[69,27,76,21,"automation"],[69,37,76,31],[69,38,76,32,"description"],[69,49,76,43],[70,14,77,8,"steps"],[70,19,77,13],[70,21,77,15,"automation"],[70,31,77,25],[70,32,77,26,"steps"],[70,37,77,31],[71,14,78,8,"category"],[71,22,78,16],[71,24,78,18,"automation"],[71,34,78,28],[71,35,78,29,"category"],[71,43,78,37],[72,14,79,8,"tags"],[72,18,79,12],[72,20,79,14,"automation"],[72,30,79,24],[72,31,79,25,"tags"],[72,35,79,29],[73,14,80,8,"changes_summary"],[73,29,80,23],[73,31,80,25,"changesSummary"],[73,45,80,39],[74,14,81,8,"created_by"],[74,24,81,18],[74,26,81,20,"user"],[74,30,81,24],[74,31,81,25,"id"],[75,12,82,6],[75,13,82,7],[76,12,84,6],[76,16,84,6,"_yield$supabase$from$3"],[76,38,84,6],[76,47,84,36,"supabase"],[76,63,84,44],[76,64,85,9,"from"],[76,68,85,13],[76,69,85,14],[76,90,85,35],[76,91,85,36],[76,92,86,9,"insert"],[76,98,86,15],[76,99,86,16,"versionData"],[76,110,86,27],[76,111,86,28],[76,112,87,9,"select"],[76,118,87,15],[76,119,87,16],[76,120,87,17],[76,121,88,9,"single"],[76,127,88,15],[76,128,88,16],[76,129,88,17],[77,14,84,14,"data"],[77,18,84,18],[77,21,84,18,"_yield$supabase$from$3"],[77,43,84,18],[77,44,84,14,"data"],[77,48,84,18],[78,14,84,20,"error"],[78,19,84,25],[78,22,84,25,"_yield$supabase$from$3"],[78,44,84,25],[78,45,84,20,"error"],[78,50,84,25],[79,12,90,6],[79,16,90,10,"error"],[79,21,90,15],[79,23,90,17],[79,29,90,23,"error"],[79,34,90,28],[80,12,91,6],[80,19,91,13,"data"],[80,23,91,17],[81,10,92,4],[81,11,92,5],[81,12,92,6],[81,19,92,13,"error"],[81,24,92,18],[81,26,92,20],[82,12,93,6,"EventLogger"],[82,36,93,17],[82,37,93,18,"error"],[82,42,93,23],[82,43,93,24],[82,59,93,40],[82,61,93,42],[82,88,93,69],[82,90,93,71,"error"],[82,95,93,85],[82,96,93,86],[83,12,94,6],[83,19,94,13],[83,23,94,17],[84,10,95,4],[85,8,96,2],[85,9,96,3],[86,8,96,3],[86,17,52,15,"createVersion"],[86,30,52,28,"createVersion"],[86,31,52,28,"_x2"],[86,34,52,28],[86,36,52,28,"_x3"],[86,39,52,28],[86,41,52,28,"_x4"],[86,44,52,28],[87,10,52,28],[87,17,52,28,"_createVersion"],[87,31,52,28],[87,32,52,28,"apply"],[87,37,52,28],[87,44,52,28,"arguments"],[87,53,52,28],[88,8,52,28],[89,8,52,28],[89,15,52,15,"createVersion"],[89,28,52,28],[90,6,52,28],[91,6,98,2],[92,0,99,0],[93,0,100,0],[94,6,98,2],[95,4,98,2],[96,6,98,2,"key"],[96,9,98,2],[97,6,98,2,"value"],[97,11,98,2],[98,8,98,2],[98,12,98,2,"_restoreVersion"],[98,27,98,2],[98,34,98,2,"_asyncToGenerator2"],[98,52,98,2],[98,53,98,2,"default"],[98,60,98,2],[98,62,101,2],[98,73,102,4,"automationId"],[98,85,102,24],[98,87,103,4,"versionId"],[98,96,103,21],[98,98,104,22],[99,10,105,4],[99,14,105,8],[100,12,106,6],[101,12,107,6],[101,16,107,6,"_yield$supabase$from$4"],[101,38,107,6],[101,47,107,59,"supabase"],[101,63,107,67],[101,64,108,9,"from"],[101,68,108,13],[101,69,108,14],[101,90,108,35],[101,91,108,36],[101,92,109,9,"select"],[101,98,109,15],[101,99,109,16],[101,102,109,19],[101,103,109,20],[101,104,110,9,"eq"],[101,106,110,11],[101,107,110,12],[101,111,110,16],[101,113,110,18,"versionId"],[101,122,110,27],[101,123,110,28],[101,124,111,9,"eq"],[101,126,111,11],[101,127,111,12],[101,142,111,27],[101,144,111,29,"automationId"],[101,156,111,41],[101,157,111,42],[101,158,112,9,"single"],[101,164,112,15],[101,165,112,16],[101,166,112,17],[102,14,107,20,"version"],[102,21,107,27],[102,24,107,27,"_yield$supabase$from$4"],[102,46,107,27],[102,47,107,14,"data"],[102,51,107,18],[103,14,107,36,"versionError"],[103,26,107,48],[103,29,107,48,"_yield$supabase$from$4"],[103,51,107,48],[103,52,107,29,"error"],[103,57,107,34],[104,12,114,6],[104,16,114,10,"versionError"],[104,28,114,22],[104,32,114,26],[104,33,114,27,"version"],[104,40,114,34],[104,42,114,36],[105,14,115,8],[105,20,115,14],[105,24,115,18,"Error"],[105,29,115,23],[105,30,115,24],[105,49,115,43],[105,50,115,44],[106,12,116,6],[108,12,118,6],[109,12,119,6],[109,16,119,6,"_yield$supabase$from$5"],[109,38,119,6],[109,47,119,43,"supabase"],[109,63,119,51],[109,64,120,9,"from"],[109,68,120,13],[109,69,120,14],[109,82,120,27],[109,83,120,28],[109,84,121,9,"update"],[109,90,121,15],[109,91,121,16],[110,16,122,10,"title"],[110,21,122,15],[110,23,122,17,"version"],[110,30,122,24],[110,31,122,25,"title"],[110,36,122,30],[111,16,123,10,"description"],[111,27,123,21],[111,29,123,23,"version"],[111,36,123,30],[111,37,123,31,"description"],[111,48,123,42],[112,16,124,10,"steps"],[112,21,124,15],[112,23,124,17,"version"],[112,30,124,24],[112,31,124,25,"steps"],[112,36,124,30],[113,16,125,10,"category"],[113,24,125,18],[113,26,125,20,"version"],[113,33,125,27],[113,34,125,28,"category"],[113,42,125,36],[114,16,126,10,"tags"],[114,20,126,14],[114,22,126,16,"version"],[114,29,126,23],[114,30,126,24,"tags"],[114,34,126,28],[115,16,127,10,"updated_at"],[115,26,127,20],[115,28,127,22],[115,32,127,26,"Date"],[115,36,127,30],[115,37,127,31],[115,38,127,32],[115,39,127,33,"toISOString"],[115,50,127,44],[115,51,127,45],[116,14,128,8],[116,15,128,9],[116,16,128,10],[116,17,129,9,"eq"],[116,19,129,11],[116,20,129,12],[116,24,129,16],[116,26,129,18,"automationId"],[116,38,129,30],[116,39,129,31],[117,14,119,21,"updateError"],[117,25,119,32],[117,28,119,32,"_yield$supabase$from$5"],[117,50,119,32],[117,51,119,14,"error"],[117,56,119,19],[118,12,131,6],[118,16,131,10,"updateError"],[118,27,131,21],[118,29,131,23],[118,35,131,29,"updateError"],[118,46,131,40],[120,12,133,6],[121,12,134,6],[121,18,134,12],[121,22,134,16],[121,23,134,17,"createVersion"],[121,36,134,30],[121,37,135,8,"automationId"],[121,49,135,20],[121,51,136,8],[121,74,136,31,"version"],[121,81,136,38],[121,82,136,39,"version_number"],[121,96,136,53],[121,98,136,55],[121,100,137,8],[122,14,138,10,"id"],[122,16,138,12],[122,18,138,14,"automationId"],[122,30,138,26],[123,14,139,10,"title"],[123,19,139,15],[123,21,139,17,"version"],[123,28,139,24],[123,29,139,25,"title"],[123,34,139,30],[124,14,140,10,"description"],[124,25,140,21],[124,27,140,23,"version"],[124,34,140,30],[124,35,140,31,"description"],[124,46,140,42],[124,50,140,46],[124,52,140,48],[125,14,141,10,"steps"],[125,19,141,15],[125,21,141,17,"version"],[125,28,141,24],[125,29,141,25,"steps"],[125,34,141,30],[126,14,142,10,"category"],[126,22,142,18],[126,24,142,20,"version"],[126,31,142,27],[126,32,142,28,"category"],[126,40,142,36],[126,44,142,40],[126,53,142,49],[127,14,143,10,"tags"],[127,18,143,14],[127,20,143,16,"version"],[127,27,143,23],[127,28,143,24,"tags"],[128,12,144,8],[128,13,145,6],[128,14,145,7],[129,12,147,6],[129,19,147,13],[129,23,147,17],[130,10,148,4],[130,11,148,5],[130,12,148,6],[130,19,148,13,"error"],[130,24,148,18],[130,26,148,20],[131,12,149,6,"EventLogger"],[131,36,149,17],[131,37,149,18,"error"],[131,42,149,23],[131,43,149,24],[131,59,149,40],[131,61,149,42],[131,89,149,70],[131,91,149,72,"error"],[131,96,149,86],[131,97,149,87],[132,12,150,6],[132,19,150,13],[132,24,150,18],[133,10,151,4],[134,8,152,2],[134,9,152,3],[135,8,152,3],[135,17,101,15,"restoreVersion"],[135,31,101,29,"restoreVersion"],[135,32,101,29,"_x5"],[135,35,101,29],[135,37,101,29,"_x6"],[135,40,101,29],[136,10,101,29],[136,17,101,29,"_restoreVersion"],[136,32,101,29],[136,33,101,29,"apply"],[136,38,101,29],[136,45,101,29,"arguments"],[136,54,101,29],[137,8,101,29],[138,8,101,29],[138,15,101,15,"restoreVersion"],[138,29,101,29],[139,6,101,29],[140,6,154,2],[141,0,155,0],[142,0,156,0],[143,6,154,2],[144,4,154,2],[145,6,154,2,"key"],[145,9,154,2],[146,6,154,2,"value"],[146,11,154,2],[146,13,157,2],[146,22,157,9,"compareVersions"],[146,37,157,24,"compareVersions"],[146,38,158,4,"oldVersion"],[146,48,158,33],[146,50,159,4,"newVersion"],[146,60,159,33],[146,62,160,25],[147,8,161,4],[147,12,161,10,"changes"],[147,19,161,38],[147,22,161,41],[147,24,161,43],[149,8,163,4],[150,8,164,4],[150,12,164,8,"oldVersion"],[150,22,164,18],[150,23,164,19,"title"],[150,28,164,24],[150,33,164,29,"newVersion"],[150,43,164,39],[150,44,164,40,"title"],[150,49,164,45],[150,51,164,47],[151,10,165,6,"changes"],[151,17,165,13],[151,18,165,14,"push"],[151,22,165,18],[151,23,165,19],[152,12,166,8,"field"],[152,17,166,13],[152,19,166,15],[152,26,166,22],[153,12,167,8,"oldValue"],[153,20,167,16],[153,22,167,18,"oldVersion"],[153,32,167,28],[153,33,167,29,"title"],[153,38,167,34],[154,12,168,8,"newValue"],[154,20,168,16],[154,22,168,18,"newVersion"],[154,32,168,28],[154,33,168,29,"title"],[154,38,168,34],[155,12,169,8,"changeType"],[155,22,169,18],[155,24,169,20],[156,10,170,6],[156,11,170,7],[156,12,170,8],[157,8,171,4],[159,8,173,4],[160,8,174,4],[160,12,174,8,"oldVersion"],[160,22,174,18],[160,23,174,19,"description"],[160,34,174,30],[160,39,174,35,"newVersion"],[160,49,174,45],[160,50,174,46,"description"],[160,61,174,57],[160,63,174,59],[161,10,175,6,"changes"],[161,17,175,13],[161,18,175,14,"push"],[161,22,175,18],[161,23,175,19],[162,12,176,8,"field"],[162,17,176,13],[162,19,176,15],[162,32,176,28],[163,12,177,8,"oldValue"],[163,20,177,16],[163,22,177,18,"oldVersion"],[163,32,177,28],[163,33,177,29,"description"],[163,44,177,40],[164,12,178,8,"newValue"],[164,20,178,16],[164,22,178,18,"newVersion"],[164,32,178,28],[164,33,178,29,"description"],[164,44,178,40],[165,12,179,8,"changeType"],[165,22,179,18],[165,24,179,20],[166,10,180,6],[166,11,180,7],[166,12,180,8],[167,8,181,4],[169,8,183,4],[170,8,184,4],[170,12,184,8,"JSON"],[170,16,184,12],[170,17,184,13,"stringify"],[170,26,184,22],[170,27,184,23,"oldVersion"],[170,37,184,33],[170,38,184,34,"steps"],[170,43,184,39],[170,44,184,40],[170,49,184,45,"JSON"],[170,53,184,49],[170,54,184,50,"stringify"],[170,63,184,59],[170,64,184,60,"newVersion"],[170,74,184,70],[170,75,184,71,"steps"],[170,80,184,76],[170,81,184,77],[170,83,184,79],[171,10,185,6],[171,14,185,12,"oldStepCount"],[171,26,185,24],[171,29,185,27,"oldVersion"],[171,39,185,37],[171,40,185,38,"steps"],[171,45,185,43],[171,46,185,44,"length"],[171,52,185,50],[172,10,186,6],[172,14,186,12,"newStepCount"],[172,26,186,24],[172,29,186,27,"newVersion"],[172,39,186,37],[172,40,186,38,"steps"],[172,45,186,43],[172,46,186,44,"length"],[172,52,186,50],[173,10,188,6],[173,14,188,10,"oldStepCount"],[173,26,188,22],[173,31,188,27,"newStepCount"],[173,43,188,39],[173,45,188,41],[174,12,189,8,"changes"],[174,19,189,15],[174,20,189,16,"push"],[174,24,189,20],[174,25,189,21],[175,14,190,10,"field"],[175,19,190,15],[175,21,190,17],[175,28,190,24],[176,14,191,10,"oldValue"],[176,22,191,18],[176,24,191,20],[176,27,191,23,"oldStepCount"],[176,39,191,35],[176,47,191,43],[177,14,192,10,"newValue"],[177,22,192,18],[177,24,192,20],[177,27,192,23,"newStepCount"],[177,39,192,35],[177,47,192,43],[178,14,193,10,"changeType"],[178,24,193,20],[178,26,193,22,"oldStepCount"],[178,38,193,34],[178,41,193,37,"newStepCount"],[178,53,193,49],[178,56,193,52],[178,63,193,59],[178,66,193,62],[179,12,194,8],[179,13,194,9],[179,14,194,10],[180,10,195,6],[180,11,195,7],[180,17,195,13],[181,12,196,8,"changes"],[181,19,196,15],[181,20,196,16,"push"],[181,24,196,20],[181,25,196,21],[182,14,197,10,"field"],[182,19,197,15],[182,21,197,17],[182,28,197,24],[183,14,198,10,"oldValue"],[183,22,198,18],[183,24,198,20],[183,40,198,36],[184,14,199,10,"newValue"],[184,22,199,18],[184,24,199,20],[184,52,199,48],[185,14,200,10,"changeType"],[185,24,200,20],[185,26,200,22],[186,12,201,8],[186,13,201,9],[186,14,201,10],[187,10,202,6],[188,8,203,4],[190,8,205,4],[191,8,206,4],[191,12,206,8,"oldVersion"],[191,22,206,18],[191,23,206,19,"category"],[191,31,206,27],[191,36,206,32,"newVersion"],[191,46,206,42],[191,47,206,43,"category"],[191,55,206,51],[191,57,206,53],[192,10,207,6,"changes"],[192,17,207,13],[192,18,207,14,"push"],[192,22,207,18],[192,23,207,19],[193,12,208,8,"field"],[193,17,208,13],[193,19,208,15],[193,29,208,25],[194,12,209,8,"oldValue"],[194,20,209,16],[194,22,209,18,"oldVersion"],[194,32,209,28],[194,33,209,29,"category"],[194,41,209,37],[195,12,210,8,"newValue"],[195,20,210,16],[195,22,210,18,"newVersion"],[195,32,210,28],[195,33,210,29,"category"],[195,41,210,37],[196,12,211,8,"changeType"],[196,22,211,18],[196,24,211,20],[197,10,212,6],[197,11,212,7],[197,12,212,8],[198,8,213,4],[200,8,215,4],[201,8,216,4],[201,12,216,10,"oldTags"],[201,19,216,17],[201,22,216,20],[201,23,216,21,"oldVersion"],[201,33,216,31],[201,34,216,32,"tags"],[201,38,216,36],[201,42,216,40],[201,44,216,42],[201,46,216,44,"sort"],[201,50,216,48],[201,51,216,49],[201,52,216,50],[202,8,217,4],[202,12,217,10,"newTags"],[202,19,217,17],[202,22,217,20],[202,23,217,21,"newVersion"],[202,33,217,31],[202,34,217,32,"tags"],[202,38,217,36],[202,42,217,40],[202,44,217,42],[202,46,217,44,"sort"],[202,50,217,48],[202,51,217,49],[202,52,217,50],[203,8,218,4],[203,12,218,8,"JSON"],[203,16,218,12],[203,17,218,13,"stringify"],[203,26,218,22],[203,27,218,23,"oldTags"],[203,34,218,30],[203,35,218,31],[203,40,218,36,"JSON"],[203,44,218,40],[203,45,218,41,"stringify"],[203,54,218,50],[203,55,218,51,"newTags"],[203,62,218,58],[203,63,218,59],[203,65,218,61],[204,10,219,6,"changes"],[204,17,219,13],[204,18,219,14,"push"],[204,22,219,18],[204,23,219,19],[205,12,220,8,"field"],[205,17,220,13],[205,19,220,15],[205,25,220,21],[206,12,221,8,"oldValue"],[206,20,221,16],[206,22,221,18,"oldTags"],[206,29,221,25],[207,12,222,8,"newValue"],[207,20,222,16],[207,22,222,18,"newTags"],[207,29,222,25],[208,12,223,8,"changeType"],[208,22,223,18],[208,24,223,20],[209,10,224,6],[209,11,224,7],[209,12,224,8],[210,8,225,4],[211,8,227,4],[211,15,227,11,"changes"],[211,22,227,18],[212,6,228,2],[214,6,230,2],[215,0,231,0],[216,0,232,0],[217,4,230,2],[218,6,230,2,"key"],[218,9,230,2],[219,6,230,2,"value"],[219,11,230,2],[220,8,230,2],[220,12,230,2,"_getVersionStats"],[220,28,230,2],[220,35,230,2,"_asyncToGenerator2"],[220,53,230,2],[220,54,230,2,"default"],[220,61,230,2],[220,63,233,2],[220,74,233,31,"automationId"],[220,86,233,51],[220,88,238,5],[221,10,239,4],[221,14,239,8],[222,12,239,8],[222,16,239,8,"_versions$"],[222,26,239,8],[223,12,240,6],[223,16,240,12,"versions"],[223,24,240,20],[223,33,240,29],[223,37,240,33],[223,38,240,34,"getVersions"],[223,49,240,45],[223,50,240,46,"automationId"],[223,62,240,58],[223,63,240,59],[224,12,242,6],[224,16,242,10,"versions"],[224,24,242,18],[224,25,242,19,"length"],[224,31,242,25],[224,36,242,30],[224,37,242,31],[224,39,242,33],[225,14,243,8],[225,21,243,15],[226,16,244,10,"totalVersions"],[226,29,244,23],[226,31,244,25],[226,32,244,26],[227,16,245,10,"lastModified"],[227,28,245,22],[227,30,245,24],[227,34,245,28],[228,16,246,10,"mostActiveDay"],[228,29,246,23],[228,31,246,25],[228,35,246,29],[229,16,247,10,"averageChangesPerVersion"],[229,40,247,34],[229,42,247,36],[230,14,248,8],[230,15,248,9],[231,12,249,6],[233,12,251,6],[234,12,252,6],[234,16,252,12,"dayGroups"],[234,25,252,45],[234,28,252,48],[234,29,252,49],[234,30,252,50],[235,12,253,6,"versions"],[235,20,253,14],[235,21,253,15,"forEach"],[235,28,253,22],[235,29,253,23],[235,39,253,23,"version"],[235,46,253,30],[235,48,253,34],[236,14,254,8],[236,18,254,14,"day"],[236,21,254,17],[236,24,254,20],[236,28,254,24,"Date"],[236,32,254,28],[236,33,254,29,"version"],[236,40,254,36],[236,41,254,37,"created_at"],[236,51,254,47],[236,52,254,48],[236,53,254,49,"toISOString"],[236,64,254,60],[236,65,254,61],[236,66,254,62],[236,67,254,63,"split"],[236,72,254,68],[236,73,254,69],[236,76,254,72],[236,77,254,73],[236,78,254,74],[236,79,254,75],[236,80,254,76],[237,14,255,8,"dayGroups"],[237,23,255,17],[237,24,255,18,"day"],[237,27,255,21],[237,28,255,22],[237,31,255,25],[237,32,255,26,"dayGroups"],[237,41,255,35],[237,42,255,36,"day"],[237,45,255,39],[237,46,255,40],[237,50,255,44],[237,51,255,45],[237,55,255,49],[237,56,255,50],[238,12,256,6],[238,13,256,7],[238,14,256,8],[239,12,258,6],[239,16,258,12,"mostActiveDay"],[239,29,258,25],[239,32,258,28,"Object"],[239,38,258,34],[239,39,258,35,"entries"],[239,46,258,42],[239,47,258,43,"dayGroups"],[239,56,258,52],[239,57,258,53],[239,58,259,9,"reduce"],[239,64,259,15],[239,65,259,16],[239,75,259,17,"max"],[239,78,259,20],[239,80,259,20,"_ref"],[239,84,259,20],[240,14,259,20],[240,18,259,20,"_ref2"],[240,23,259,20],[240,30,259,20,"_slicedToArray2"],[240,45,259,20],[240,46,259,20,"default"],[240,53,259,20],[240,55,259,20,"_ref"],[240,59,259,20],[241,16,259,23,"day"],[241,19,259,26],[241,22,259,26,"_ref2"],[241,27,259,26],[242,16,259,28,"count"],[242,21,259,33],[242,24,259,33,"_ref2"],[242,29,259,33],[243,14,259,33],[243,21,259,39,"count"],[243,26,259,44],[243,29,259,47,"max"],[243,32,259,50],[243,33,259,51,"count"],[243,38,259,56],[243,41,259,59],[244,16,259,61,"day"],[244,19,259,64],[244,21,259,61,"day"],[244,24,259,64],[245,16,259,66,"count"],[245,21,259,71],[245,23,259,66,"count"],[246,14,259,72],[246,15,259,73],[246,18,259,76,"max"],[246,21,259,79],[247,12,259,79],[247,15,259,81],[248,14,259,83,"day"],[248,17,259,86],[248,19,259,88],[248,21,259,90],[249,14,259,92,"count"],[249,19,259,97],[249,21,259,99],[250,12,259,101],[250,13,259,102],[250,14,259,103],[250,15,260,9,"day"],[250,18,260,12],[251,12,262,6],[251,19,262,13],[252,14,263,8,"totalVersions"],[252,27,263,21],[252,29,263,23,"versions"],[252,37,263,31],[252,38,263,32,"length"],[252,44,263,38],[253,14,264,8,"lastModified"],[253,26,264,20],[253,28,264,22],[253,30,264,22,"_versions$"],[253,40,264,22],[253,43,264,22,"versions"],[253,51,264,30],[253,52,264,31],[253,53,264,32],[253,54,264,33],[253,75,264,22,"_versions$"],[253,85,264,22],[253,86,264,35,"created_at"],[253,96,264,45],[253,101,264,49],[253,105,264,53],[254,14,265,8,"mostActiveDay"],[254,27,265,21],[254,29,265,23,"mostActiveDay"],[254,42,265,36],[254,46,265,40],[254,50,265,44],[255,14,266,8,"averageChangesPerVersion"],[255,38,266,32],[255,40,266,34,"versions"],[255,48,266,42],[255,49,266,43,"length"],[255,55,266,49],[255,58,266,52],[255,59,266,53],[255,62,266,56,"Math"],[255,66,266,60],[255,67,266,61,"round"],[255,72,266,66],[255,73,266,67],[255,74,266,68,"versions"],[255,82,266,76],[255,83,266,77,"length"],[255,89,266,83],[255,92,266,86],[255,93,266,87],[255,97,266,91,"versions"],[255,105,266,99],[255,106,266,100,"length"],[255,112,266,106],[255,115,266,109],[255,118,266,112],[255,119,266,113],[255,122,266,116],[255,125,266,119],[255,128,266,122],[256,12,267,6],[256,13,267,7],[257,10,268,4],[257,11,268,5],[257,12,268,6],[257,19,268,13,"error"],[257,24,268,18],[257,26,268,20],[258,12,269,6,"EventLogger"],[258,36,269,17],[258,37,269,18,"error"],[258,42,269,23],[258,43,269,24],[258,59,269,40],[258,61,269,42],[258,91,269,72],[258,93,269,74,"error"],[258,98,269,88],[258,99,269,89],[259,12,270,6],[259,19,270,13],[260,14,271,8,"totalVersions"],[260,27,271,21],[260,29,271,23],[260,30,271,24],[261,14,272,8,"lastModified"],[261,26,272,20],[261,28,272,22],[261,32,272,26],[262,14,273,8,"mostActiveDay"],[262,27,273,21],[262,29,273,23],[262,33,273,27],[263,14,274,8,"averageChangesPerVersion"],[263,38,274,32],[263,40,274,34],[264,12,275,6],[264,13,275,7],[265,10,276,4],[266,8,277,2],[266,9,277,3],[267,8,277,3],[267,17,233,15,"getVersionStats"],[267,32,233,30,"getVersionStats"],[267,33,233,30,"_x7"],[267,36,233,30],[268,10,233,30],[268,17,233,30,"_getVersionStats"],[268,33,233,30],[268,34,233,30,"apply"],[268,39,233,30],[268,46,233,30,"arguments"],[268,55,233,30],[269,8,233,30],[270,8,233,30],[270,15,233,15,"getVersionStats"],[270,30,233,30],[271,6,233,30],[272,6,279,2],[273,0,280,0],[274,0,281,0],[275,6,279,2],[276,4,279,2],[277,6,279,2,"key"],[277,9,279,2],[278,6,279,2,"value"],[278,11,279,2],[279,8,279,2],[279,12,279,2,"_deleteVersion"],[279,26,279,2],[279,33,279,2,"_asyncToGenerator2"],[279,51,279,2],[279,52,279,2,"default"],[279,59,279,2],[279,61,282,2],[279,72,282,29,"versionId"],[279,81,282,46],[279,83,282,66],[280,10,283,4],[280,14,283,8],[281,12,284,6],[281,16,284,6,"_yield$supabase$from$6"],[281,38,284,6],[281,47,284,30,"supabase"],[281,63,284,38],[281,64,285,9,"from"],[281,68,285,13],[281,69,285,14],[281,90,285,35],[281,91,285,36],[281,92,286,9,"delete"],[281,98,286,15],[281,99,286,16],[281,100,286,17],[281,101,287,9,"eq"],[281,103,287,11],[281,104,287,12],[281,108,287,16],[281,110,287,18,"versionId"],[281,119,287,27],[281,120,287,28],[282,14,284,14,"error"],[282,19,284,19],[282,22,284,19,"_yield$supabase$from$6"],[282,44,284,19],[282,45,284,14,"error"],[282,50,284,19],[283,12,289,6],[283,16,289,10,"error"],[283,21,289,15],[283,23,289,17],[283,29,289,23,"error"],[283,34,289,28],[284,12,290,6],[284,19,290,13],[284,23,290,17],[285,10,291,4],[285,11,291,5],[285,12,291,6],[285,19,291,13,"error"],[285,24,291,18],[285,26,291,20],[286,12,292,6,"EventLogger"],[286,36,292,17],[286,37,292,18,"error"],[286,42,292,23],[286,43,292,24],[286,59,292,40],[286,61,292,42],[286,88,292,69],[286,90,292,71,"error"],[286,95,292,85],[286,96,292,86],[287,12,293,6],[287,19,293,13],[287,24,293,18],[288,10,294,4],[289,8,295,2],[289,9,295,3],[290,8,295,3],[290,17,282,15,"deleteVersion"],[290,30,282,28,"deleteVersion"],[290,31,282,28,"_x8"],[290,34,282,28],[291,10,282,28],[291,17,282,28,"_deleteVersion"],[291,31,282,28],[291,32,282,28,"apply"],[291,37,282,28],[291,44,282,28,"arguments"],[291,53,282,28],[292,8,282,28],[293,8,282,28],[293,15,282,15,"deleteVersion"],[293,28,282,28],[294,6,282,28],[295,4,282,28],[296,2,282,28],[297,0,282,28],[297,3]],"functionMap":{"names":["<global>","VersionHistoryService","getVersions","createVersion","restoreVersion","compareVersions","getVersionStats","versions.forEach$argument_0","Object.entries.reduce$argument_0","deleteVersion"],"mappings":"AAA;OCyB;ECI;GDiB;EEK;GF4C;EGK;GHmD;EIK;GJuE;EKK;uBCoB;ODG;gBEG,+DF;GLkB;EQK;GRa"}},"type":"js/module"}]}