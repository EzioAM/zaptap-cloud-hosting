{"dependencies":[{"name":"./constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":17,"index":94},"end":{"line":6,"column":39,"index":116}}],"key":"3z43bJyk/UB4EKjDCOXTFak09do=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports.default = getStoredState;\n  var _constants = require(_dependencyMap[0]);\n  function getStoredState(config) {\n    var transforms = config.transforms || [];\n    var storageKey = \"\".concat(config.keyPrefix !== undefined ? config.keyPrefix : _constants.KEY_PREFIX).concat(config.key);\n    var storage = config.storage;\n    var debug = config.debug;\n    var deserialize;\n    if (config.deserialize === false) {\n      deserialize = function deserialize(x) {\n        return x;\n      };\n    } else if (typeof config.deserialize === 'function') {\n      deserialize = config.deserialize;\n    } else {\n      deserialize = defaultDeserialize;\n    }\n    return storage.getItem(storageKey).then(function (serialized) {\n      if (!serialized) return undefined;else {\n        try {\n          var state = {};\n          var rawState = deserialize(serialized);\n          Object.keys(rawState).forEach(function (key) {\n            state[key] = transforms.reduceRight(function (subState, transformer) {\n              return transformer.out(subState, key, rawState);\n            }, deserialize(rawState[key]));\n          });\n          return state;\n        } catch (err) {\n          throw err;\n        }\n      }\n    });\n  }\n  function defaultDeserialize(serial) {\n    return JSON.parse(serial);\n  }\n});","lineCount":42,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"exports"],[4,9,3,7],[4,10,3,8,"__esModule"],[4,20,3,18],[4,23,3,21],[4,27,3,25],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"default"],[5,17,4,15],[5,20,4,18,"getStoredState"],[5,34,4,32],[6,2,6,0],[6,6,6,4,"_constants"],[6,16,6,14],[6,19,6,17,"require"],[6,26,6,24],[6,27,6,24,"_dependencyMap"],[6,41,6,24],[6,44,6,38],[6,45,6,39],[7,2,8,0],[7,11,8,9,"getStoredState"],[7,25,8,23,"getStoredState"],[7,26,8,24,"config"],[7,32,8,30],[7,34,8,32],[8,4,9,2],[8,8,9,6,"transforms"],[8,18,9,16],[8,21,9,19,"config"],[8,27,9,25],[8,28,9,26,"transforms"],[8,38,9,36],[8,42,9,40],[8,44,9,42],[9,4,10,2],[9,8,10,6,"storageKey"],[9,18,10,16],[9,21,10,19],[9,23,10,21],[9,24,10,22,"concat"],[9,30,10,28],[9,31,10,29,"config"],[9,37,10,35],[9,38,10,36,"keyPrefix"],[9,47,10,45],[9,52,10,50,"undefined"],[9,61,10,59],[9,64,10,62,"config"],[9,70,10,68],[9,71,10,69,"keyPrefix"],[9,80,10,78],[9,83,10,81,"_constants"],[9,93,10,91],[9,94,10,92,"KEY_PREFIX"],[9,104,10,102],[9,105,10,103],[9,106,10,104,"concat"],[9,112,10,110],[9,113,10,111,"config"],[9,119,10,117],[9,120,10,118,"key"],[9,123,10,121],[9,124,10,122],[10,4,11,2],[10,8,11,6,"storage"],[10,15,11,13],[10,18,11,16,"config"],[10,24,11,22],[10,25,11,23,"storage"],[10,32,11,30],[11,4,12,2],[11,8,12,6,"debug"],[11,13,12,11],[11,16,12,14,"config"],[11,22,12,20],[11,23,12,21,"debug"],[11,28,12,26],[12,4,13,2],[12,8,13,6,"deserialize"],[12,19,13,17],[13,4,15,2],[13,8,15,6,"config"],[13,14,15,12],[13,15,15,13,"deserialize"],[13,26,15,24],[13,31,15,29],[13,36,15,34],[13,38,15,36],[14,6,16,4,"deserialize"],[14,17,16,15],[14,20,16,18],[14,29,16,27,"deserialize"],[14,40,16,38,"deserialize"],[14,41,16,39,"x"],[14,42,16,40],[14,44,16,42],[15,8,17,6],[15,15,17,13,"x"],[15,16,17,14],[16,6,18,4],[16,7,18,5],[17,4,19,2],[17,5,19,3],[17,11,19,9],[17,15,19,13],[17,22,19,20,"config"],[17,28,19,26],[17,29,19,27,"deserialize"],[17,40,19,38],[17,45,19,43],[17,55,19,53],[17,57,19,55],[18,6,20,4,"deserialize"],[18,17,20,15],[18,20,20,18,"config"],[18,26,20,24],[18,27,20,25,"deserialize"],[18,38,20,36],[19,4,21,2],[19,5,21,3],[19,11,21,9],[20,6,22,4,"deserialize"],[20,17,22,15],[20,20,22,18,"defaultDeserialize"],[20,38,22,36],[21,4,23,2],[22,4,25,2],[22,11,25,9,"storage"],[22,18,25,16],[22,19,25,17,"getItem"],[22,26,25,24],[22,27,25,25,"storageKey"],[22,37,25,35],[22,38,25,36],[22,39,25,37,"then"],[22,43,25,41],[22,44,25,42],[22,54,25,52,"serialized"],[22,64,25,62],[22,66,25,64],[23,6,26,4],[23,10,26,8],[23,11,26,9,"serialized"],[23,21,26,19],[23,23,26,21],[23,30,26,28,"undefined"],[23,39,26,37],[23,40,26,38],[23,45,26,43],[24,8,27,6],[24,12,27,10],[25,10,28,8],[25,14,28,12,"state"],[25,19,28,17],[25,22,28,20],[25,23,28,21],[25,24,28,22],[26,10,29,8],[26,14,29,12,"rawState"],[26,22,29,20],[26,25,29,23,"deserialize"],[26,36,29,34],[26,37,29,35,"serialized"],[26,47,29,45],[26,48,29,46],[27,10,30,8,"Object"],[27,16,30,14],[27,17,30,15,"keys"],[27,21,30,19],[27,22,30,20,"rawState"],[27,30,30,28],[27,31,30,29],[27,32,30,30,"forEach"],[27,39,30,37],[27,40,30,38],[27,50,30,48,"key"],[27,53,30,51],[27,55,30,53],[28,12,31,10,"state"],[28,17,31,15],[28,18,31,16,"key"],[28,21,31,19],[28,22,31,20],[28,25,31,23,"transforms"],[28,35,31,33],[28,36,31,34,"reduceRight"],[28,47,31,45],[28,48,31,46],[28,58,31,56,"subState"],[28,66,31,64],[28,68,31,66,"transformer"],[28,79,31,77],[28,81,31,79],[29,14,32,12],[29,21,32,19,"transformer"],[29,32,32,30],[29,33,32,31,"out"],[29,36,32,34],[29,37,32,35,"subState"],[29,45,32,43],[29,47,32,45,"key"],[29,50,32,48],[29,52,32,50,"rawState"],[29,60,32,58],[29,61,32,59],[30,12,33,10],[30,13,33,11],[30,15,33,13,"deserialize"],[30,26,33,24],[30,27,33,25,"rawState"],[30,35,33,33],[30,36,33,34,"key"],[30,39,33,37],[30,40,33,38],[30,41,33,39],[30,42,33,40],[31,10,34,8],[31,11,34,9],[31,12,34,10],[32,10,35,8],[32,17,35,15,"state"],[32,22,35,20],[33,8,36,6],[33,9,36,7],[33,10,36,8],[33,17,36,15,"err"],[33,20,36,18],[33,22,36,20],[34,10,38,8],[34,16,38,14,"err"],[34,19,38,17],[35,8,39,6],[36,6,40,4],[37,4,41,2],[37,5,41,3],[37,6,41,4],[38,2,42,0],[39,2,44,0],[39,11,44,9,"defaultDeserialize"],[39,29,44,27,"defaultDeserialize"],[39,30,44,28,"serial"],[39,36,44,34],[39,38,44,36],[40,4,45,2],[40,11,45,9,"JSON"],[40,15,45,13],[40,16,45,14,"parse"],[40,21,45,19],[40,22,45,20,"serial"],[40,28,45,26],[40,29,45,27],[41,2,46,0],[42,0,46,1],[42,3]],"functionMap":{"names":["<global>","getStoredState","deserialize","storage.getItem.then$argument_0","Object.keys.forEach$argument_0","transforms.reduceRight$argument_0","defaultDeserialize"],"mappings":"AAA;ACO;kBCQ;KDE;0CEO;sCCK;8CCC;WDE;SDC;GFO;CDC;AME"}},"type":"js/module"}]}