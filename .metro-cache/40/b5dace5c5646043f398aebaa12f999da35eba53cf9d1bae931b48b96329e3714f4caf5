{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/defineProperty","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"X490zePjq+0IljAc8X0qcBg0iTo=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"]}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var _defineProperty2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/defineProperty\"));\n  var React = _interopRequireWildcard(require(_dependencyMap[2], \"react\"));\n  var _NavigationBuilderContext = require(_dependencyMap[3], \"./NavigationBuilderContext.js\");\n  var _NavigationRouteContext = require(_dependencyMap[4], \"./NavigationRouteContext.js\");\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) \"default\" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = exports.shouldPreventRemove = function shouldPreventRemove(emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) {\n    var _action$VISITED_ROUTE;\n    var nextRouteKeys = nextRoutes.map(function (route) {\n      return route.key;\n    });\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(function (route) {\n      return !nextRouteKeys.includes(route.key);\n    }).reverse();\n    var visitedRouteKeys = // @ts-expect-error: add this property to mark that we've already emitted this action\n    (_action$VISITED_ROUTE = action[VISITED_ROUTE_KEYS]) != null ? _action$VISITED_ROUTE : new Set();\n    var beforeRemoveAction = Object.assign({}, action, (0, _defineProperty2.default)({}, VISITED_ROUTE_KEYS, visitedRouteKeys));\n    for (var route of removedRoutes) {\n      var _beforeRemoveListener;\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = (_beforeRemoveListener = beforeRemoveListeners[route.key]) == null ? void 0 : _beforeRemoveListener.call(beforeRemoveListeners, beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(_NavigationBuilderContext.NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(_NavigationRouteContext.NavigationRouteContext);\n    var routeKey = route == null ? void 0 : route.key;\n    React.useEffect(function () {\n      if (routeKey) {\n        return addKeyedListener == null ? void 0 : addKeyedListener('beforeRemove', routeKey, function (action) {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":73,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"shouldPreventRemove"],[8,29,1,13],[9,2,1,13,"exports"],[9,9,1,13],[9,10,1,13,"useOnPreventRemove"],[9,28,1,13],[9,31,1,13,"useOnPreventRemove"],[9,49,1,13],[10,2,1,13],[10,6,1,13,"_defineProperty2"],[10,22,1,13],[10,25,1,13,"_interopRequireDefault"],[10,47,1,13],[10,48,1,13,"require"],[10,55,1,13],[10,56,1,13,"_dependencyMap"],[10,70,1,13],[11,2,3,0],[11,6,3,0,"React"],[11,11,3,0],[11,14,3,0,"_interopRequireWildcard"],[11,37,3,0],[11,38,3,0,"require"],[11,45,3,0],[11,46,3,0,"_dependencyMap"],[11,60,3,0],[12,2,4,0],[12,6,4,0,"_NavigationBuilderContext"],[12,31,4,0],[12,34,4,0,"require"],[12,41,4,0],[12,42,4,0,"_dependencyMap"],[12,56,4,0],[13,2,5,0],[13,6,5,0,"_NavigationRouteContext"],[13,29,5,0],[13,32,5,0,"require"],[13,39,5,0],[13,40,5,0,"_dependencyMap"],[13,54,5,0],[14,2,5,69],[14,11,5,69,"_interopRequireWildcard"],[14,35,5,69,"e"],[14,36,5,69],[14,38,5,69,"t"],[14,39,5,69],[14,68,5,69,"WeakMap"],[14,75,5,69],[14,81,5,69,"r"],[14,82,5,69],[14,89,5,69,"WeakMap"],[14,96,5,69],[14,100,5,69,"n"],[14,101,5,69],[14,108,5,69,"WeakMap"],[14,115,5,69],[14,127,5,69,"_interopRequireWildcard"],[14,150,5,69],[14,162,5,69,"_interopRequireWildcard"],[14,186,5,69,"e"],[14,187,5,69],[14,189,5,69,"t"],[14,190,5,69],[14,199,5,69,"t"],[14,200,5,69],[14,204,5,69,"e"],[14,205,5,69],[14,209,5,69,"e"],[14,210,5,69],[14,211,5,69,"__esModule"],[14,221,5,69],[14,230,5,69,"e"],[14,231,5,69],[14,237,5,69,"o"],[14,238,5,69],[14,240,5,69,"i"],[14,241,5,69],[14,243,5,69,"f"],[14,244,5,69],[14,249,5,69,"__proto__"],[14,258,5,69],[14,266,5,69,"default"],[14,273,5,69],[14,275,5,69,"e"],[14,276,5,69],[14,293,5,69,"e"],[14,294,5,69],[14,317,5,69,"e"],[14,318,5,69],[14,343,5,69,"e"],[14,344,5,69],[14,353,5,69,"f"],[14,354,5,69],[14,360,5,69,"o"],[14,361,5,69],[14,364,5,69,"t"],[14,365,5,69],[14,368,5,69,"n"],[14,369,5,69],[14,372,5,69,"r"],[14,373,5,69],[14,381,5,69,"o"],[14,382,5,69],[14,383,5,69,"has"],[14,386,5,69],[14,387,5,69,"e"],[14,388,5,69],[14,398,5,69,"o"],[14,399,5,69],[14,400,5,69,"get"],[14,403,5,69],[14,404,5,69,"e"],[14,405,5,69],[14,408,5,69,"o"],[14,409,5,69],[14,410,5,69,"set"],[14,413,5,69],[14,414,5,69,"e"],[14,415,5,69],[14,417,5,69,"f"],[14,418,5,69],[14,432,5,69,"_t"],[14,434,5,69],[14,438,5,69,"e"],[14,439,5,69],[14,455,5,69,"_t"],[14,457,5,69],[14,464,5,69,"hasOwnProperty"],[14,478,5,69],[14,479,5,69,"call"],[14,483,5,69],[14,484,5,69,"e"],[14,485,5,69],[14,487,5,69,"_t"],[14,489,5,69],[14,496,5,69,"i"],[14,497,5,69],[14,501,5,69,"o"],[14,502,5,69],[14,505,5,69,"Object"],[14,511,5,69],[14,512,5,69,"defineProperty"],[14,526,5,69],[14,531,5,69,"Object"],[14,537,5,69],[14,538,5,69,"getOwnPropertyDescriptor"],[14,562,5,69],[14,563,5,69,"e"],[14,564,5,69],[14,566,5,69,"_t"],[14,568,5,69],[14,575,5,69,"i"],[14,576,5,69],[14,577,5,69,"get"],[14,580,5,69],[14,584,5,69,"i"],[14,585,5,69],[14,586,5,69,"set"],[14,589,5,69],[14,593,5,69,"o"],[14,594,5,69],[14,595,5,69,"f"],[14,596,5,69],[14,598,5,69,"_t"],[14,600,5,69],[14,602,5,69,"i"],[14,603,5,69],[14,607,5,69,"f"],[14,608,5,69],[14,609,5,69,"_t"],[14,611,5,69],[14,615,5,69,"e"],[14,616,5,69],[14,617,5,69,"_t"],[14,619,5,69],[14,630,5,69,"f"],[14,631,5,69],[14,636,5,69,"e"],[14,637,5,69],[14,639,5,69,"t"],[14,640,5,69],[15,2,6,0],[15,6,6,6,"VISITED_ROUTE_KEYS"],[15,24,6,24],[15,27,6,27,"Symbol"],[15,33,6,33],[15,34,6,34],[15,54,6,54],[15,55,6,55],[16,2,7,7],[16,6,7,13,"shouldPreventRemove"],[16,25,7,32],[16,28,7,32,"exports"],[16,35,7,32],[16,36,7,32,"shouldPreventRemove"],[16,55,7,32],[16,58,7,35],[16,67,7,13,"shouldPreventRemove"],[16,86,7,32,"shouldPreventRemove"],[16,87,7,36,"emitter"],[16,94,7,43],[16,96,7,45,"beforeRemoveListeners"],[16,117,7,66],[16,119,7,68,"currentRoutes"],[16,132,7,81],[16,134,7,83,"nextRoutes"],[16,144,7,93],[16,146,7,95,"action"],[16,152,7,101],[16,154,7,106],[17,4,7,106],[17,8,7,106,"_action$VISITED_ROUTE"],[17,29,7,106],[18,4,8,2],[18,8,8,8,"nextRouteKeys"],[18,21,8,21],[18,24,8,24,"nextRoutes"],[18,34,8,34],[18,35,8,35,"map"],[18,38,8,38],[18,39,8,39],[18,49,8,39,"route"],[18,54,8,44],[19,6,8,44],[19,13,8,48,"route"],[19,18,8,53],[19,19,8,54,"key"],[19,22,8,57],[20,4,8,57],[20,6,8,58],[22,4,10,2],[23,4,11,2],[23,8,11,8,"removedRoutes"],[23,21,11,21],[23,24,11,24,"currentRoutes"],[23,37,11,37],[23,38,11,38,"filter"],[23,44,11,44],[23,45,11,45],[23,55,11,45,"route"],[23,60,11,50],[24,6,11,50],[24,13,11,54],[24,14,11,55,"nextRouteKeys"],[24,27,11,68],[24,28,11,69,"includes"],[24,36,11,77],[24,37,11,78,"route"],[24,42,11,83],[24,43,11,84,"key"],[24,46,11,87],[24,47,11,88],[25,4,11,88],[25,6,11,89],[25,7,11,90,"reverse"],[25,14,11,97],[25,15,11,98],[25,16,11,99],[26,4,12,2],[26,8,12,8,"visitedRouteKeys"],[26,24,12,24],[26,27,13,2],[27,4,13,2],[27,5,13,2,"_action$VISITED_ROUTE"],[27,26,13,2],[27,29,14,2,"action"],[27,35,14,8],[27,36,14,9,"VISITED_ROUTE_KEYS"],[27,54,14,27],[27,55,14,28],[27,67,14,28,"_action$VISITED_ROUTE"],[27,88,14,28],[27,91,14,32],[27,95,14,36,"Set"],[27,98,14,39],[27,99,14,40],[27,100,14,41],[28,4,15,2],[28,8,15,8,"beforeRemoveAction"],[28,26,15,26],[28,29,15,26,"Object"],[28,35,15,26],[28,36,15,26,"assign"],[28,42,15,26],[28,47,16,7,"action"],[28,53,16,13],[28,59,16,13,"_defineProperty2"],[28,75,16,13],[28,76,16,13,"default"],[28,83,16,13],[28,89,17,5,"VISITED_ROUTE_KEYS"],[28,107,17,23],[28,109,17,26,"visitedRouteKeys"],[28,125,17,42],[28,127,18,3],[29,4,19,2],[29,9,19,7],[29,13,19,13,"route"],[29,18,19,18],[29,22,19,22,"removedRoutes"],[29,35,19,35],[29,37,19,37],[30,6,19,37],[30,10,19,37,"_beforeRemoveListener"],[30,31,19,37],[31,6,20,4],[31,10,20,8,"visitedRouteKeys"],[31,26,20,24],[31,27,20,25,"has"],[31,30,20,28],[31,31,20,29,"route"],[31,36,20,34],[31,37,20,35,"key"],[31,40,20,38],[31,41,20,39],[31,43,20,41],[32,8,21,6],[33,8,22,6],[34,6,23,4],[36,6,25,4],[37,6,26,4],[37,10,26,10,"isPrevented"],[37,21,26,21],[37,25,26,21,"_beforeRemoveListener"],[37,46,26,21],[37,49,26,24,"beforeRemoveListeners"],[37,70,26,45],[37,71,26,46,"route"],[37,76,26,51],[37,77,26,52,"key"],[37,80,26,55],[37,81,26,56],[37,102,26,24,"_beforeRemoveListener"],[37,123,26,24],[37,124,26,24,"call"],[37,128,26,24],[37,129,26,24,"beforeRemoveListeners"],[37,150,26,45],[37,152,26,59,"beforeRemoveAction"],[37,170,26,77],[37,171,26,78],[38,6,27,4],[38,10,27,8,"isPrevented"],[38,21,27,19],[38,23,27,21],[39,8,28,6],[39,15,28,13],[39,19,28,17],[40,6,29,4],[41,6,30,4,"visitedRouteKeys"],[41,22,30,20],[41,23,30,21,"add"],[41,26,30,24],[41,27,30,25,"route"],[41,32,30,30],[41,33,30,31,"key"],[41,36,30,34],[41,37,30,35],[42,6,31,4],[42,10,31,10,"event"],[42,15,31,15],[42,18,31,18,"emitter"],[42,25,31,25],[42,26,31,26,"emit"],[42,30,31,30],[42,31,31,31],[43,8,32,6,"type"],[43,12,32,10],[43,14,32,12],[43,28,32,26],[44,8,33,6,"target"],[44,14,33,12],[44,16,33,14,"route"],[44,21,33,19],[44,22,33,20,"key"],[44,25,33,23],[45,8,34,6,"data"],[45,12,34,10],[45,14,34,12],[46,10,35,8,"action"],[46,16,35,14],[46,18,35,16,"beforeRemoveAction"],[47,8,36,6],[47,9,36,7],[48,8,37,6,"canPreventDefault"],[48,25,37,23],[48,27,37,25],[49,6,38,4],[49,7,38,5],[49,8,38,6],[50,6,39,4],[50,10,39,8,"event"],[50,15,39,13],[50,16,39,14,"defaultPrevented"],[50,32,39,30],[50,34,39,32],[51,8,40,6],[51,15,40,13],[51,19,40,17],[52,6,41,4],[53,4,42,2],[54,4,43,2],[54,11,43,9],[54,16,43,14],[55,2,44,0],[55,3,44,1],[56,2,45,7],[56,11,45,16,"useOnPreventRemove"],[56,29,45,34,"useOnPreventRemove"],[56,30,45,34,"_ref"],[56,34,45,34],[56,36,49,3],[57,4,49,3],[57,8,46,2,"getState"],[57,16,46,10],[57,19,46,10,"_ref"],[57,23,46,10],[57,24,46,2,"getState"],[57,32,46,10],[58,6,47,2,"emitter"],[58,13,47,9],[58,16,47,9,"_ref"],[58,20,47,9],[58,21,47,2,"emitter"],[58,28,47,9],[59,6,48,2,"beforeRemoveListeners"],[59,27,48,23],[59,30,48,23,"_ref"],[59,34,48,23],[59,35,48,2,"beforeRemoveListeners"],[59,56,48,23],[60,4,50,2],[60,8,50,2,"_React$useContext"],[60,25,50,2],[60,28,52,6,"React"],[60,33,52,11],[60,34,52,12,"useContext"],[60,44,52,22],[60,45,52,23,"NavigationBuilderContext"],[60,95,52,47],[60,96,52,48],[61,6,51,4,"addKeyedListener"],[61,22,51,20],[61,25,51,20,"_React$useContext"],[61,42,51,20],[61,43,51,4,"addKeyedListener"],[61,59,51,20],[62,4,53,2],[62,8,53,8,"route"],[62,13,53,13],[62,16,53,16,"React"],[62,21,53,21],[62,22,53,22,"useContext"],[62,32,53,32],[62,33,53,33,"NavigationRouteContext"],[62,79,53,55],[62,80,53,56],[63,4,54,2],[63,8,54,8,"routeKey"],[63,16,54,16],[63,19,54,19,"route"],[63,24,54,24],[63,44,54,19,"route"],[63,49,54,24],[63,50,54,26,"key"],[63,53,54,29],[64,4,55,2,"React"],[64,9,55,7],[64,10,55,8,"useEffect"],[64,19,55,17],[64,20,55,18],[64,32,55,24],[65,6,56,4],[65,10,56,8,"routeKey"],[65,18,56,16],[65,20,56,18],[66,8,57,6],[66,15,57,13,"addKeyedListener"],[66,31,57,29],[66,51,57,13,"addKeyedListener"],[66,67,57,29],[66,68,57,32],[66,82,57,46],[66,84,57,48,"routeKey"],[66,92,57,56],[66,94,57,58],[66,104,57,58,"action"],[66,110,57,64],[66,112,57,68],[67,10,58,8],[67,14,58,14,"state"],[67,19,58,19],[67,22,58,22,"getState"],[67,30,58,30],[67,31,58,31],[67,32,58,32],[68,10,59,8],[68,17,59,15,"shouldPreventRemove"],[68,36,59,34],[68,37,59,35,"emitter"],[68,44,59,42],[68,46,59,44,"beforeRemoveListeners"],[68,67,59,65],[68,69,59,67,"state"],[68,74,59,72],[68,75,59,73,"routes"],[68,81,59,79],[68,83,59,81],[68,85,59,83],[68,87,59,85,"action"],[68,93,59,91],[68,94,59,92],[69,8,60,6],[69,9,60,7],[69,10,60,8],[70,6,61,4],[71,4,62,2],[71,5,62,3],[71,7,62,5],[71,8,62,6,"addKeyedListener"],[71,24,62,22],[71,26,62,24,"beforeRemoveListeners"],[71,47,62,45],[71,49,62,47,"emitter"],[71,56,62,54],[71,58,62,56,"getState"],[71,66,62,64],[71,68,62,66,"routeKey"],[71,76,62,74],[71,77,62,75],[71,78,62,76],[72,2,63,0],[73,0,63,1],[73,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"}},"type":"js/module"}]}