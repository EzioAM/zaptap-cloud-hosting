{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"]}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"]}},{"name":"./LocationEventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":62,"index":105}}],"key":"38XLRnQdDBx35ZID4eB8duhAnLg=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.LocationSubscriber = exports.LocationErrorSubscriber = exports.HeadingSubscriber = void 0;\n  exports._getCurrentWatchId = _getCurrentWatchId;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _ExpoLocation = _interopRequireDefault(require(_dependencyMap[3], \"./ExpoLocation\"));\n  var _LocationEventEmitter = require(_dependencyMap[4], \"./LocationEventEmitter\");\n  var nextWatchId = 0;\n  var Subscriber = /*#__PURE__*/function () {\n    function Subscriber(eventName, eventDataField) {\n      (0, _classCallCheck2.default)(this, Subscriber);\n      this.callbacks = {};\n      this.eventSubscription = null;\n      this.eventName = eventName;\n      this.eventDataField = eventDataField;\n    }\n    return (0, _createClass2.default)(Subscriber, [{\n      key: \"maybeInitializeSubscription\",\n      value: function maybeInitializeSubscription() {\n        var _this = this;\n        if (this.eventSubscription) {\n          return;\n        }\n        this.eventSubscription = _LocationEventEmitter.LocationEventEmitter.addListener(this.eventName, function (event) {\n          return _this.trigger(event);\n        });\n      }\n      /**\n       * Registers given callback under new id which is then returned.\n       */\n    }, {\n      key: \"registerCallback\",\n      value: function registerCallback(callback) {\n        this.maybeInitializeSubscription();\n        var id = ++nextWatchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Registers given callback under and existing id. This can be used to\n       * create a subscriber for the error event on the same id as the location\n       * event is subscribed to.\n       */\n    }, {\n      key: \"registerCallbackForId\",\n      value: function registerCallbackForId(watchId, callback) {\n        this.maybeInitializeSubscription();\n        var id = watchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Unregisters a callback with given id and revokes the subscription if possible.\n       */\n    }, {\n      key: \"unregisterCallback\",\n      value: function unregisterCallback(id) {\n        // Do nothing if we have already unregistered the callback.\n        if (!this.callbacks[id]) {\n          return;\n        }\n        delete this.callbacks[id];\n        _ExpoLocation.default.removeWatchAsync(id);\n        if (Object.keys(this.callbacks).length === 0 && this.eventSubscription) {\n          _LocationEventEmitter.LocationEventEmitter.removeSubscription(this.eventSubscription);\n          this.eventSubscription = null;\n        }\n      }\n    }, {\n      key: \"trigger\",\n      value: function trigger(event) {\n        var watchId = event.watchId;\n        var callback = this.callbacks[watchId];\n        if (callback) {\n          callback(event[this.eventDataField]);\n        } else {\n          _ExpoLocation.default.removeWatchAsync(watchId);\n        }\n      }\n    }]);\n  }();\n  var LocationSubscriber = exports.LocationSubscriber = new Subscriber('Expo.locationChanged', 'location');\n  var HeadingSubscriber = exports.HeadingSubscriber = new Subscriber('Expo.headingChanged', 'heading');\n  var LocationErrorSubscriber = exports.LocationErrorSubscriber = new Subscriber('Expo.locationError', 'reason');\n  /**\n   * @private Necessary for some unit tests.\n   */\n  function _getCurrentWatchId() {\n    return nextWatchId;\n  }\n});","lineCount":95,"map":[[10,2,1,0],[10,6,1,0,"_ExpoLocation"],[10,19,1,0],[10,22,1,0,"_interopRequireDefault"],[10,44,1,0],[10,45,1,0,"require"],[10,52,1,0],[10,53,1,0,"_dependencyMap"],[10,67,1,0],[11,2,2,0],[11,6,2,0,"_LocationEventEmitter"],[11,27,2,0],[11,30,2,0,"require"],[11,37,2,0],[11,38,2,0,"_dependencyMap"],[11,52,2,0],[12,2,3,0],[12,6,3,4,"nextWatchId"],[12,17,3,15],[12,20,3,18],[12,21,3,19],[13,2,3,20],[13,6,4,6,"Subscriber"],[13,16,4,16],[14,4,9,4],[14,13,9,4,"Subscriber"],[14,24,9,16,"eventName"],[14,33,9,25],[14,35,9,27,"eventDataField"],[14,49,9,41],[14,51,9,43],[15,6,9,43],[15,10,9,43,"_classCallCheck2"],[15,26,9,43],[15,27,9,43,"default"],[15,34,9,43],[15,42,9,43,"Subscriber"],[15,52,9,43],[16,6,9,43],[16,11,7,4,"callbacks"],[16,20,7,13],[16,23,7,16],[16,24,7,17],[16,25,7,18],[17,6,7,18],[17,11,8,4,"eventSubscription"],[17,28,8,21],[17,31,8,24],[17,35,8,28],[18,6,10,8],[18,10,10,12],[18,11,10,13,"eventName"],[18,20,10,22],[18,23,10,25,"eventName"],[18,32,10,34],[19,6,11,8],[19,10,11,12],[19,11,11,13,"eventDataField"],[19,25,11,27],[19,28,11,30,"eventDataField"],[19,42,11,44],[20,4,12,4],[21,4,12,5],[21,15,12,5,"_createClass2"],[21,28,12,5],[21,29,12,5,"default"],[21,36,12,5],[21,38,12,5,"Subscriber"],[21,48,12,5],[22,6,12,5,"key"],[22,9,12,5],[23,6,12,5,"value"],[23,11,12,5],[23,13,13,4],[23,22,13,4,"maybeInitializeSubscription"],[23,49,13,31,"maybeInitializeSubscription"],[23,50,13,31],[23,52,13,34],[24,8,13,34],[24,12,13,34,"_this"],[24,17,13,34],[25,8,14,8],[25,12,14,12],[25,16,14,16],[25,17,14,17,"eventSubscription"],[25,34,14,34],[25,36,14,36],[26,10,15,12],[27,8,16,8],[28,8,17,8],[28,12,17,12],[28,13,17,13,"eventSubscription"],[28,30,17,30],[28,33,17,33,"LocationEventEmitter"],[28,75,17,53],[28,76,17,54,"addListener"],[28,87,17,65],[28,88,17,66],[28,92,17,70],[28,93,17,71,"eventName"],[28,102,17,80],[28,104,17,82],[28,114,17,83,"event"],[28,119,17,88],[29,10,17,88],[29,17,17,93,"_this"],[29,22,17,97],[29,23,17,98,"trigger"],[29,30,17,105],[29,31,17,106,"event"],[29,36,17,111],[29,37,17,112],[30,8,17,112],[30,10,17,113],[31,6,18,4],[32,6,19,4],[33,0,20,0],[34,0,21,0],[35,4,19,4],[36,6,19,4,"key"],[36,9,19,4],[37,6,19,4,"value"],[37,11,19,4],[37,13,22,4],[37,22,22,4,"registerCallback"],[37,38,22,20,"registerCallback"],[37,39,22,21,"callback"],[37,47,22,29],[37,49,22,31],[38,8,23,8],[38,12,23,12],[38,13,23,13,"maybeInitializeSubscription"],[38,40,23,40],[38,41,23,41],[38,42,23,42],[39,8,24,8],[39,12,24,14,"id"],[39,14,24,16],[39,17,24,19],[39,19,24,21,"nextWatchId"],[39,30,24,32],[40,8,25,8],[40,12,25,12],[40,13,25,13,"callbacks"],[40,22,25,22],[40,23,25,23,"id"],[40,25,25,25],[40,26,25,26],[40,29,25,29,"callback"],[40,37,25,37],[41,8,26,8],[41,15,26,15,"id"],[41,17,26,17],[42,6,27,4],[43,6,28,4],[44,0,29,0],[45,0,30,0],[46,0,31,0],[47,0,32,0],[48,4,28,4],[49,6,28,4,"key"],[49,9,28,4],[50,6,28,4,"value"],[50,11,28,4],[50,13,33,4],[50,22,33,4,"registerCallbackForId"],[50,43,33,25,"registerCallbackForId"],[50,44,33,26,"watchId"],[50,51,33,33],[50,53,33,35,"callback"],[50,61,33,43],[50,63,33,45],[51,8,34,8],[51,12,34,12],[51,13,34,13,"maybeInitializeSubscription"],[51,40,34,40],[51,41,34,41],[51,42,34,42],[52,8,35,8],[52,12,35,14,"id"],[52,14,35,16],[52,17,35,19,"watchId"],[52,24,35,26],[53,8,36,8],[53,12,36,12],[53,13,36,13,"callbacks"],[53,22,36,22],[53,23,36,23,"id"],[53,25,36,25],[53,26,36,26],[53,29,36,29,"callback"],[53,37,36,37],[54,8,37,8],[54,15,37,15,"id"],[54,17,37,17],[55,6,38,4],[56,6,39,4],[57,0,40,0],[58,0,41,0],[59,4,39,4],[60,6,39,4,"key"],[60,9,39,4],[61,6,39,4,"value"],[61,11,39,4],[61,13,42,4],[61,22,42,4,"unregisterCallback"],[61,40,42,22,"unregisterCallback"],[61,41,42,23,"id"],[61,43,42,25],[61,45,42,27],[62,8,43,8],[63,8,44,8],[63,12,44,12],[63,13,44,13],[63,17,44,17],[63,18,44,18,"callbacks"],[63,27,44,27],[63,28,44,28,"id"],[63,30,44,30],[63,31,44,31],[63,33,44,33],[64,10,45,12],[65,8,46,8],[66,8,47,8],[66,15,47,15],[66,19,47,19],[66,20,47,20,"callbacks"],[66,29,47,29],[66,30,47,30,"id"],[66,32,47,32],[66,33,47,33],[67,8,48,8,"ExpoLocation"],[67,29,48,20],[67,30,48,21,"removeWatchAsync"],[67,46,48,37],[67,47,48,38,"id"],[67,49,48,40],[67,50,48,41],[68,8,49,8],[68,12,49,12,"Object"],[68,18,49,18],[68,19,49,19,"keys"],[68,23,49,23],[68,24,49,24],[68,28,49,28],[68,29,49,29,"callbacks"],[68,38,49,38],[68,39,49,39],[68,40,49,40,"length"],[68,46,49,46],[68,51,49,51],[68,52,49,52],[68,56,49,56],[68,60,49,60],[68,61,49,61,"eventSubscription"],[68,78,49,78],[68,80,49,80],[69,10,50,12,"LocationEventEmitter"],[69,52,50,32],[69,53,50,33,"removeSubscription"],[69,71,50,51],[69,72,50,52],[69,76,50,56],[69,77,50,57,"eventSubscription"],[69,94,50,74],[69,95,50,75],[70,10,51,12],[70,14,51,16],[70,15,51,17,"eventSubscription"],[70,32,51,34],[70,35,51,37],[70,39,51,41],[71,8,52,8],[72,6,53,4],[73,4,53,5],[74,6,53,5,"key"],[74,9,53,5],[75,6,53,5,"value"],[75,11,53,5],[75,13,54,4],[75,22,54,4,"trigger"],[75,29,54,11,"trigger"],[75,30,54,12,"event"],[75,35,54,17],[75,37,54,19],[76,8,55,8],[76,12,55,14,"watchId"],[76,19,55,21],[76,22,55,24,"event"],[76,27,55,29],[76,28,55,30,"watchId"],[76,35,55,37],[77,8,56,8],[77,12,56,14,"callback"],[77,20,56,22],[77,23,56,25],[77,27,56,29],[77,28,56,30,"callbacks"],[77,37,56,39],[77,38,56,40,"watchId"],[77,45,56,47],[77,46,56,48],[78,8,57,8],[78,12,57,12,"callback"],[78,20,57,20],[78,22,57,22],[79,10,58,12,"callback"],[79,18,58,20],[79,19,58,21,"event"],[79,24,58,26],[79,25,58,27],[79,29,58,31],[79,30,58,32,"eventDataField"],[79,44,58,46],[79,45,58,47],[79,46,58,48],[80,8,59,8],[80,9,59,9],[80,15,60,13],[81,10,61,12,"ExpoLocation"],[81,31,61,24],[81,32,61,25,"removeWatchAsync"],[81,48,61,41],[81,49,61,42,"watchId"],[81,56,61,49],[81,57,61,50],[82,8,62,8],[83,6,63,4],[84,4,63,5],[85,2,63,5],[86,2,65,7],[86,6,65,13,"LocationSubscriber"],[86,24,65,31],[86,27,65,31,"exports"],[86,34,65,31],[86,35,65,31,"LocationSubscriber"],[86,53,65,31],[86,56,65,34],[86,60,65,38,"Subscriber"],[86,70,65,48],[86,71,65,49],[86,93,65,71],[86,95,65,73],[86,105,65,83],[86,106,65,84],[87,2,66,7],[87,6,66,13,"HeadingSubscriber"],[87,23,66,30],[87,26,66,30,"exports"],[87,33,66,30],[87,34,66,30,"HeadingSubscriber"],[87,51,66,30],[87,54,66,33],[87,58,66,37,"Subscriber"],[87,68,66,47],[87,69,66,48],[87,90,66,69],[87,92,66,71],[87,101,66,80],[87,102,66,81],[88,2,67,7],[88,6,67,13,"LocationErrorSubscriber"],[88,29,67,36],[88,32,67,36,"exports"],[88,39,67,36],[88,40,67,36,"LocationErrorSubscriber"],[88,63,67,36],[88,66,67,39],[88,70,67,43,"Subscriber"],[88,80,67,53],[88,81,67,54],[88,101,67,74],[88,103,67,76],[88,111,67,84],[88,112,67,85],[89,2,68,0],[90,0,69,0],[91,0,70,0],[92,2,71,7],[92,11,71,16,"_getCurrentWatchId"],[92,29,71,34,"_getCurrentWatchId"],[92,30,71,34],[92,32,71,37],[93,4,72,4],[93,11,72,11,"nextWatchId"],[93,22,72,22],[94,2,73,0],[95,0,73,1],[95,3]],"functionMap":{"names":["<global>","Subscriber","Subscriber#constructor","Subscriber#maybeInitializeSubscription","LocationEventEmitter.addListener$argument_1","Subscriber#registerCallback","Subscriber#registerCallbackForId","Subscriber#unregisterCallback","Subscriber#trigger","_getCurrentWatchId"],"mappings":"AAA;ACG;ICK;KDG;IEC;kFCI,8BD;KFC;III;KJK;IKM;KLK;IMI;KNW;IOC;KPS;CDC;OSO;CTE"}},"type":"js/module"}]}